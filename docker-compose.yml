version: "3.7"

services:
    mongodb:
        image: mongo:4.0.4
        volumes:
            - mongo-data:/data
    wtb:
        image: wtb:latest
        environment:
            - TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
            - WTB_DEVELOPMENT_MODE=${WTB_DEVELOPMENT_MODE}
        depends_on:
            - mongodb
        links:
            - mongodb
    wtb-matchmaker:
        image: wtb:latest
        entrypoint: wtb-matchmaker
        environment:
            - TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
            - WTB_DEVELOPMENT_MODE=${WTB_DEVELOPMENT_MODE}
        depends_on:
            - mongodb
        links:
            - mongodb
volumes:
    mongo-data:
